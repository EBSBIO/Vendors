# Infrastructure 

## Стенды
### TKUR1:
* t01nbpbioproc01 [10.113.128.184] - скрипты
* t01nbpbioproc02 [10.113.128.185] - swarm 1
* t01nbpbioproc03 [10.113.128.186] - swarm 1

### TKUR2:
* t01nbpbioproc04 [10.113.128.187] - скрипты
* t01nbpbioproc05 [10.113.128.188] - swarm 2
* t01nbpbioproc06 [10.113.128.189] - swarm 2

### TKUR3:
* t01nbpbioproc07 [10.113.128.190] - скрипты
* t01nbpbioproc08 [10.113.128.191] - swarm 2
* t01nbpbioproc09 [10.113.128.192] - swarm 2



# API-tests
Вызов скрипта без параметров показывает справку.
Запуск тестирования:
> ./api_test_verification_photo.sh -v -t extract 127.0.0.1:8080



# Load tests
Скрипты для нагрузочного тестирования могут выполнять тест в двух режимах:
* "один сэмпл" – не требуется указывать опцию -s;
* "много сэмплов" – требуется указать опцию -s.

Вызов скрипта без параметров показывает справку.

Опция -d:
* запускает процесс удаления ранее извлеченных векторов в процессе тестирования;
* опция актуальна, если перед тестированием новой версии БП или другого БП требуется очистить данные предыдущего БП.

Опция -b запускает тест в screen для 8 часового теста на стабильность.
Вывод jmeter можно посмотреть так: tail -f tmp/jmeter.log

Опция -s:
* указывает на абсолютный путь к директории с сэмплами для тестирования;
* опция актуальна для тестирования нагрузки в режиме "много сэмплов".

Опция -r задает RAMP-UP период.

Опция -p задает префикс.

Опция -t указывает тип биопроцессора (sound/photo). Без опции, по умолчанию, тестируется photo.

Скрипт stop_load.sh останавливает тест.

Пример запуска теста в режиме "один сэмпл":
> ./start_load_verification.sh tevian_gpu extract 3 127.0.0.1 8080

Пример запуска теста в режиме "много сэмплов":
> ./start_load_verification.sh -s /opt/photo/ tevian_gpu extract 3 127.0.0.1 8080
